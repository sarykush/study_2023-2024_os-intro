---
## Front matter
title: "Лабораторная работа №7"
subtitle: "Анализ файловой системы Linux.
Команды для работы с файлами и каталогами"
author: "Буллер Татьяна Александровна"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: false # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Ознакомление с файловой системой Linux, её структурой, именами и содержанием каталогов. Приобретение практических навыков по применению команд для работы с файлами и каталогами, по управлению процессами (и работами), по проверке использования диска и обслуживанию файловой системы.

# Выполнение заданий примеров

## Копирование и создание файлов.

Необходимо скопировать файл ~/abc1 в файл april и в файл may. Для этого командой touch создаем сам файл, далее с помощью команды cp копируем его содержимое в новые файлы.

![Копирование файла в текущем каталоге](image/1.png){#fig:001 width=70%}

Теперь нужно скопировать файлы april и may в каталог monthly - для этого с помощью mkdir создаем каталог monthly, с помощью уже изместной ср копируем файлы в каталог. Припишем названия файлов в одну строку - так они скопируются в рамках одной команды.

![Копирование нескольких файлов в каталог](image/2.png){#fig:002 width=70%}

После этого скопируем файл monthly/may в файл с именем junе - для этого используем команду ср и прописываем полный путь до файла.

![Копирование файлов в произвольном каталоге](image/3.png){#fig:003 width=70%}

Теперь скопируем каталог monthly в каталог monthly.00: для этого используем cp -r. Опция копируем рекурсивно - весь каталог перемещается в созданный новый.

![Копирование каталогов в текущем каталоге](image/4.png){#fig:004 width=70%}

Далее по заданию нужно скопировать каталог monthly.00 в каталог /tmp. Для этого опять используем опцию рекурсивного копирования и прописываем полный путь к файлу (каталогу), куда хотим копировать.

![Копирование каталогов в произвольном каталоге](image/5.png){#fig:005 width=70%}

##  Перемещение и переименование файлов и каталогов

Задание: зменить название файла april на july в домашнем каталоге. Для этого используем команду mv: де-юре название будет изменено, де-факто мы перемещаем файл в файл с другим названием и удаляем предыдущий одной командой.

![Переименование файлов в текущем каталоге](image/6.png){#fig:006 width=70%}

Чтобы переместить файл july в каталог monthly.00 используем ту же команду, на этот раз прописывая полный путь до места назначения. При проверке новый файл появляется вместо с остальным содержимым каталога.

![Перемещение файлов в другой каталог](image/7.png){#fig:007 width=70%}

Необходимо также переименовать каталог monthly.00 в monthly.01. Для этого снова используем mv, работаем точно так же, как когда нам нужно было переименовать файл.

![Переименование каталогов в текущем каталоге](image/8.png){#fig:008 width=70%}

Переместить каталог monthly.01 в каталог reports. Для этого сперва создаем каталог с нужным именем, после этого перемещаем каталог, как до этого делали с файлами.
Чтобы далее переименовать каталог reports/monthly.01 в reports/monthly снова используем ту же команду, но на этот раз, так как мы переименовываем файлы не в рабочем каталоге, прописываем полный путь до них:

![Перемещение каталога в другой каталог. Переименование каталога, не являющегося текущим](image/9.png){#fig:009 width=70%}

## Права доступа и их изменение

В каталоге существует файл may. Дадим владельцу права на его исполнение, после чего заберем назад и посмотрим, что получилось.
После добавления права исполнения (+u) для владельца (u) при просмотре файла он подсвечивается зеленым - теперо его можно исполнять, а в строке прав появляется дополнительный символ. Когда же право изымается, файл возвращается к исходному состоянию.

![Добавление и удаление права исполнения](image/10.png){#fig:010 width=70%}

Требуется создать каталог monthly с запретом на чтение для членов группы и всех остальных пользователей. Каталог уже создан, для того, чтобы лишить пользователей прав чтения, используем chmod. -r - лишение права чтения, для группы (g) и всех пользователей (о) соответственно.

![Изъятие права чтения для группы и других пользователей](image/11.png){#fig:011 width=70%}

Теперь создадим новый файл и дадим группе права на запись в него. Пользуемся тем же, чем пользовались, когда добавляли владельцу права на исполнение, но теперь работаме с группой (g) и правом записи (+w)

![Добавление права записи для группы](image/12.png){#fig:012 width=70%}

# Выполнение лабораторной работы

##  Перемещение, копирование и переименование файлов и каталогов

Задание: скопируйте файл (...) в домашний каталог и назовите егоequipment. Если файла io.h нет, то используйте любой другой файл в каталоге /usr/include/sys/ вместо него.
Проблема: моя система не имеет каталога /usr/include/sys/ в принципе. Вместо этого копируем файл из usr/include/, проверяем его наличие - в выводе команды ls он отображается - и переходим к следующему шагу: создадим новую директорию и переместим скопированный файл в него.

![Копирование и перемещение файла](image/13.png){#fig:013 width=70%}

Далее скопируем под другим названием файл abc1, для этого используем команду ср. Проверим - файлы скопировались, все на месте. Далее создаем новую директорию и переносим новые файлы туда. 

![Копирование и перемещение файлов](image/14.png){#fig:014 width=70%}

Теперь создадим в домашнем каталоге новую директорию и переместим ее (уже под другим именем) в созданный каталог ski.places - для этого используем mkdir и mv соответственно.

![Создание и перемещение нового каталога](image/15.png){#fig:015 width=70%}

## Права доступа и их изменение

Далее определим опции, необходимые для изменение прав на файлы и директории. Что имеем по заданию:
- ```drwxr--r-- ... australia```
- ```drwx--x--x ... play```
- ```-r-xr--r-- ... my_os```
- ```-rw-rw-r-- ... feathers```

Видим, что первые два файла являются директориями, последние - отдельными файлами. Начнем с конца.
Изначально владелец файла имеет право на чтение и запись, все остальные (группа и прочие пользователи) - только на чтение. Для файлов нам необходимо:
- убрать у владельца  my_os право на запись, добавить право на исполение (u-w+x)
- добавить группе владельца файла feathers право на запись в файл (g+w)

![Редактирование доступа к файлам](image/16.png){#fig:016 width=70%}

australia и play являются каталогами, о чем говорит буква d в начале строки прав доступа. По умолчанию владелец директории имеет все права к ней, группа и другие пользователи - права на чтение и исполнение.

Для первого каталога необходимо убрать у всех, кроме владельца, права на исполнение. Для этого используем go-x. Для второго каталога убираем у всех, кроме владельца, права на чтение go-w.

![Редактирование доступа к каталогам](image/17.png){#fig:017 width=70%}

##  Продолжение работы с файлами и каталогами

Теперь продолжим работу с файлами. Попробуем вывести на экран содержимое файла /etc/password - и столкнемся с ошибкой, потому что на данном дистрибутиве такого файла в системе нет. Его функции выполняет /etc/passwd.

![password, не passwd](image/18.png){#fig:018 width=70%}

Далее скопируем уже имеющийся файл feathers под новым названием в домашнюю директорию. file.old теперь перемещаем в директорию play, копируем этот каталог в созданный в домашнем каталоге fun и уже его переносим назад в play/games

![Махинации с копированием и перемещением файлов и каталогов](image/19.png){#fig:019 width=70%}

## Вызов ошибок доступа

Теперь поработаем с правами доступа. 
Лишим владельца файла ~/feathers права на чтение. При просмотреть файл ~/feathers командой cat мы встречаемся с ошибкой: доступ запрещен, мы только что отобрали у себя это право. То же самое будет при попытке скопировать файл ~/feathers. Смилуемся и вернем право на чтение: u+r.

Далее лишаем владельца каталога ~/play права на выполнение. При попытке перейти в этот каталог снова видим ту же ошибку: доступ запрещен, так как я запретила владельцу (себе) исполнять этот файл (каталог). Возвращаю права на выполнение - теперь все будет работать.

![Махинации с правами доступа файлов и каталогов](image/20.png){#fig:020 width=70%}

## Руководства man

После этого посмотрим на несколько руководств. Команда mount, судя по описанию, монтирует файловую систему:

![руководство к команде mount](image/21.png){#fig:021 width=70%}

Команда fsck проверяет файловую систему и репарирует ее, если были найдены ошибки.

![руководство к команде fsck](image/22.png){#fig:022 width=70%}

Команда mkfs создает файловую систему в принципе.

![руководство к команде mkfs](image/23.png){#fig:023 width=70%}

Команда kill "убивает" (отключает) процессы или задачи.

![руководство к команде kill](image/24.png){#fig:024 width=70%}

# Выводы

Приобретены практические навыки по применению команд для работы с файлами и каталогами, по управлению процессами (и работами), по проверке использования диска и обслуживанию файловой системы.
